import{F as E,a as k,C as m,b as C,E as _,c as M,d as g}from"./ContactForm.module.c8adaa75.js";import{f as I,g as p,j as t,a as r,i as O,F as P,k as R,c as $,C as w,r as u,R as D,l as B,L as j}from"./index.29b324a2.js";function b(){return I(e=>e)}const z={name:"",number:""},T=/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/im,q=M().shape({name:g().required(),number:g().matches(T,"Phone number is not valid").required()});function v(){const{contacts:e}=b(),{items:n}=e,a=p();return t(E,{initialValues:z,onSubmit:(s,{resetForm:i})=>{if(n.some(l=>l.name.toLocaleLowerCase()===s.name.toLocaleLowerCase())){alert(`${s.name} is already in Contacts`);return}a(O(s)),i()},validationSchema:q,children:r(k,{className:m.ContactForm,children:[r("label",{className:m.label,htmlFor:"name",children:["Name",t(C,{type:"text",name:"name",className:m.input}),t(_,{name:"name"})]}),r("label",{className:m.label,htmlFor:"number",children:["Phone Number",t(C,{type:"text",name:"number",className:m.input}),t(_,{name:"number"})]}),t("button",{type:"submit",className:m.buttonSubmit,children:"Add contact"})]})})}const A="_container_h6zv8_1",V="_contactInfo_h6zv8_31",H="_action_h6zv8_41";var d={container:A,contactInfo:V,action:H};function K({contact:e,onRemove:n,onEdit:a}){const{name:c,number:s}=e;return t(P,{children:r("li",{className:d.container,children:[r("div",{className:d.contactInfo,children:[c," : ",s]}),r("section",{className:d.action,children:[t("button",{type:"button",onClick:a,children:"Edit"}),t("button",{type:"button",onClick:n,children:"Delete"})]})]})})}function G({visibleContacts:e,onEdit:n}){const a=p();return t("ul",{className:d.contactList,children:e.map(c=>t(K,{contact:c,onEdit:n,onRemove:()=>a(R(c.id))},c.id))})}const J="_filterContainer_r5lvb_1",Q="_input_r5lvb_15";var h={filterContainer:J,input:Q};function U(){const{filter:e}=b(),n=$();return t("div",{className:h.filterContainer,children:r("label",{className:h.label,children:["Find contact by name:",t("input",{type:"text",value:e,onChange:a=>n(w(a.target.value)),name:"filter",className:h.input})]})})}const W="_container_1bcr2_1",X="_heading_1bcr2_15";var f={container:W,heading:X};function Y({message:e}){return t("p",{children:e})}const Z="_Overlay_1cath_1",tt="_Modal_1cath_27";var N={Overlay:Z,Modal:tt};function et({isOpen:e,onCloseModal:n,children:a}){const c=document.getElementById("modal"),s=u.exports.useRef(null),i=o=>{console.log(o),o.code==="Escape"&&n()},l=o=>{o.target===o.currentTarget&&n()};return u.exports.useEffect(()=>{var o;(o=s.current)==null||o.focus()},[]),e?D.createPortal(t("div",{className:N.Overlay,onClick:l,onKeyDown:i,role:"button",tabIndex:0,ref:s,children:t("div",{className:N.Modal,children:a})}),c):null}function ot(){const[e,n]=u.exports.useState(!1),a=p(),{contacts:c,filter:s}=b(),{items:i,error:l,isLoading:o}=c,F=()=>{n(!1)},L=S=>S.filter(x=>x.name.toLocaleLowerCase().includes(s.toLocaleLowerCase()));u.exports.useEffect(()=>{a(B())},[a]);const y=L(i);return r("div",{className:f.container,children:[t("h2",{className:f.heading,children:"PhoneBook"}),t(v,{}),t("h2",{className:f.heading,children:"Contacts"}),i.length>1&&t(U,{}),i.length>0&&!l&&!o&&t(G,{visibleContacts:y,onEdit:()=>n(!0)}),o&&t(j,{}),l&&t(Y,{message:l}),t(et,{isOpen:e,onCloseModal:F,children:t(v,{})})]})}export{ot as default};
